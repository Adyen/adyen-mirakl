package com.adyen.mirakl.service;

import java.io.IOException;
import java.util.ArrayList;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import com.adyen.mirakl.AdyenMiraklConnectorApp;

@RunWith(SpringRunner.class)
@SpringBootTest(classes = AdyenMiraklConnectorApp.class)
public class PayoutServiceIntTest {

    @Autowired
    private PayoutService payoutService;

    @Test
    public void testParseCSV() throws IOException {

        String csvExample =
            "\"shop-id\";\"shop-name\";\"shop-corporate-name\";\"shop-address-lastname\";\"shop-address-firstname\";\"shop-address-street1\";\"shop-address-street2\";\"shop-address-complementary\";\"shop-address-zip-code\";\"shop-address-city\";\"shop-address-country\";\"shop-address-state\";\"shop-email\";\"shop-is-professional\";\"shop-siret\";\"shop-vat-number\";\"date-created\";\"start-time\";\"end-time\";\"invoice-number\";\"billing-info-owner\";\"billing-info-bank-name\";\"billing-info-bank-street\";\"billing-info-bank-zip\";\"billing-info-bank-city\";\"billing-info-bic\";\"billing-info-iban\";\"order-amount\";\"order-shipping-amount\";\"order-commission-amount\";\"order-commission-amount-vat\";\"refund-amount\";\"refund-shipping-amount\";\"refund-commission-amount\";\"refund-commission-amount-vat\";\"subscription-amount\";\"subscription-amount-vat\";\"total-charged-amount\";\"total-charged-amount-vat\";\"transfer-amount\";\"shop-operator-internal-id\";\"shop-identification-number\";\"total-manual-invoice-amount\";\"total-manual-invoice-amount-vat\";\"total-manual-credit-amount\";\"total-manual-credit-amount-vat\";\"currency-iso-code\";\"payment-info-type\";\"payment-info-owner\";\"payment-info-bank-name\";\"payment-info-bank-city\";\"payment-info-bank-zip\";\"payment-info-bank-street\";\"payment-info-ibantype-iban\";\"payment-info-ibantype-bic\"\n"
                + "\"2081\";\"ACME Safety CO\";\"ACME Safety CO\";\"Hackmann\";\"Terence\";\"10 Acme Road\";\"\";\"\";\"06901\";\"Acmetown\";\"USA\";\"\";\"richard.cotton+safety@e2y.co.uk\";\"true\";\"03920202\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-06-19 10:41:53.409\";\"2017-09-11 00:00:01.407218\";\"230193\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"50.00\";\"4.00\";\"2.70\";\"0.00\";\"40.00\";\"3.00\";\"2.15\";\"0.00\";\"0.00\";\"0.00\";\"0.55\";\"0.00\";\"10.45\";\"\";\"03920202\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2082\";\"FICO\";\"FICO Corp\";\"Cotton\";\"Richard\";\"10 Some Road\";\"\";\"\";\"06901\";\"Stamford\";\"USA\";\"CT\";\"richard.cotton+fico@e2y.co.uk\";\"true\";\"0383923923\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-09-05 22:43:09.855\";\"2017-09-11 00:00:01.407218\";\"230188\";\"Richard Cotton\";\"LLoyds TSB\";\"1 London Bridge\";\"SE1 9BG\";\"London\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"20.00\";\"2.00\";\"1.10\";\"0.22\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"1.10\";\"0.22\";\"20.68\";\"\";\"0383923923\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"London\";\"SE1 9BG\";\"1 London Bridge\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2083\";\"Camco\";\"Camco\";\"Richard\";\"Cotton\";\"14 Electronics Avenue\";\"\";\"\";\"07863\";\"Smallville\";\"USA\";\"\";\"richard.cotton+camco@e2y.co.uk\";\"true\";\"98712345\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-07-05 07:00:00.957\";\"2017-09-11 00:00:01.407218\";\"230190\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"78.00\";\"4.25\";\"4.11\";\"0.00\";\"0.00\";\"1.25\";\"0.06\";\"0.00\";\"0.00\";\"0.00\";\"4.05\";\"0.00\";\"76.95\";\"\";\"98712345\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2000\";\"E2Y\";\"E2Y\";\"Richard\";\"Cotton\";\"1 London Bridge\";\"\";\"\";\"SE1 9BG\";\"London\";\"GBR\";\"London\";\"richard.cotton+@e2y.co.uk\";\"true\";\"08914061\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-05-15 18:02:35.895\";\"2017-09-11 00:00:01.407218\";\"230191\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"14.55\";\"3.00\";\"0.88\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"0.88\";\"0.00\";\"16.67\";\"\";\"08914061\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"EUR\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2084\";\"E2Y USA\";\"E2Y\";\"Cotton\";\"Richard\";\"1 London Bridge\";\"\";\"\";\"SE1 9BG\";\"London\";\"GBR\";\"\";\"richard.cotton+@e2y.co.uk\";\"true\";\"08914061\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-05-15 18:38:27.396\";\"2017-09-11 00:00:01.407218\";\"230189\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"11060.00\";\"79.00\";\"556.95\";\"8.02\";\"905.00\";\"5.00\";\"45.50\";\"0.00\";\"0.00\";\"0.00\";\"511.45\";\"8.02\";\"9109.53\";\"\";\"08914061\";\"600.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"\";\"\";\"\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2085\";\"Worthwhile Tat\";\"Worthwhile Tat\";\"Rich\";\"Mathias\";\"1 London Bridge\";\"\";\"\";\"SE1\";\"London\";\"GBR\";\"\";\"richard.mathias+worthwhiletat@e2y.co.uk\";\"true\";\"0389330303\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-07-17 13:09:12.969\";\"2017-09-11 00:00:01.407218\";\"230192\";\"Richard Mathias\";\"LLoyds TSB\";\"\";\"\";\"\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"740.70\";\"32.00\";\"38.62\";\"0.00\";\"370.35\";\"27.00\";\"19.86\";\"0.00\";\"0.00\";\"0.00\";\"18.76\";\"0.00\";\"356.59\";\"\";\"0389330303\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Mathias\";\"LLoyds TSB\";\"\";\"\";\"\";\"DE89370400440532013000\";\"BSAMLKL1234\"\n"
                + "\"2086\";\"Photo Plus USA\";\"Photo Plus\";\"Cotton\";\"Richard\";\"1 London Bridge\";\"\";\"\";\"SE1 9BG\";\"London\";\"GBR\";\"\";\"richard.cotton+photoplus@e2y.co.uk\";\"true\";\"030202022\";\"\";\"2017-09-11 00:00:01.407218\";\"2017-08-17 12:26:11.565\";\"2017-09-11 00:00:01.407218\";\"230194\";\"Richard Cotton\";\"LLoyds TSB\";\"1 London Bridge\";\"SE1 9BG\";\"London\";\"BSAMLKL1234\";\"DE89370400440532013000\";\"298.00\";\"6.75\";\"15.24\";\"0.00\";\"6.00\";\"5.00\";\"0.55\";\"0.00\";\"0.00\";\"0.00\";\"14.69\";\"0.00\";\"279.06\";\"\";\"030202022\";\"0.00\";\"0.00\";\"0.00\";\"0.00\";\"USD\";\"IBAN\";\"Richard Cotton\";\"LLoyds TSB\";\"London\";\"SE1 9BG\";\"1 London Bridge\";\"DE89370400440532013000\";\"BSAMLKL1234\"";
        payoutService.parseMiraklCsv(csvExample);
    }
}
